{"version":3,"file":"impressions.js","names":["React","useKeenSlider","wordmark","icon","lispLexer","lispCallback","ImpressionsIcons","props","iconsContainer","viewportKey","iconsMode","icons","impressionsRaw","payload","Object","keys","forEach","pane","activePanes","includes","paneFragment","impression","index","this_impression","this_icon","injectPayload","payload_ast","actionsLisp","useHookEndPoint","push","length","ImpressionsCarousel","refCallback","slider","sliderNode","loop","mode","breakpoints","slides","perView","spacing","timeout","mouseOver","clearNextTimeout","clearTimeout","nextTimeout","setTimeout","next","on","container","addEventListener","impressions","title","headline"],"sources":["src/impressions.js"],"sourcesContent":["import React from \"react\";\nimport \"keen-slider/keen-slider.min.css\";\nimport { useKeenSlider } from \"keen-slider/react\";\nimport { wordmark, icon } from \"./shapes\";\nimport { lispLexer } from \"./lexer\";\nimport { lispCallback } from \"./helpers\";\n\nconst ImpressionsIcons = (props) => {\n  let iconsContainer = `controller__icons controller__icons--${props?.viewportKey}`,\n    iconsMode,\n    icons = [];\n  let impressionsRaw = props?.payload;\n  if (impressionsRaw)\n    Object.keys(impressionsRaw).forEach((pane) => {\n      if (props?.activePanes?.includes(pane))\n        Object.keys(impressionsRaw[pane]).forEach((paneFragment) => {\n          Object.keys(impressionsRaw[pane][paneFragment]).forEach(\n            (impression, index) => {\n              let this_impression =\n                impressionsRaw[pane][paneFragment][impression];\n              let this_icon = icon(this_impression?.icon);\n              function injectPayload() {\n                let payload_ast = lispLexer(this_impression?.actionsLisp);\n                lispCallback(payload_ast[0], \"\", props?.useHookEndPoint);\n              }\n              icons.push(\n                <li\n                  key={index}\n                  className=\"action visible\"\n                  onClick={() => injectPayload()}\n                >\n                  {this_icon}\n                </li>\n              );\n            }\n          );\n        });\n    });\n  if (icons.length <= 4) iconsMode = \"default\";\n  else iconsMode = \"full\";\n\n  return (\n    <div className={iconsContainer}>\n      <ul className={iconsMode}>{icons}</ul>\n    </div>\n  );\n};\n\nconst ImpressionsCarousel = (props) => {\n  const [refCallback, slider, sliderNode] = useKeenSlider(\n    {\n      loop: true,\n      mode: \"free-snap\",\n\n      breakpoints: {\n        \"(min-width: 601px)\": {\n          slides: { perView: 3, spacing: 4 },\n        },\n        \"(min-width: 1367px)\": {\n          slides: { perView: 5, spacing: 6 },\n        },\n      },\n      slides: { perView: 2 },\n    },\n    [\n      (slider) => {\n        let timeout;\n        let mouseOver = false;\n        function clearNextTimeout() {\n          clearTimeout(timeout);\n        }\n        function nextTimeout() {\n          clearTimeout(timeout);\n          if (mouseOver) return;\n          timeout = setTimeout(() => {\n            slider.next();\n          }, 22000);\n        }\n        slider.on(\"created\", () => {\n          slider.container.addEventListener(\"mouseover\", () => {\n            mouseOver = true;\n            clearNextTimeout();\n          });\n          slider.container.addEventListener(\"mouseout\", () => {\n            mouseOver = false;\n            nextTimeout();\n          });\n          nextTimeout();\n        });\n        slider.on(\"dragStarted\", clearNextTimeout);\n        slider.on(\"animationEnded\", nextTimeout);\n        slider.on(\"updated\", nextTimeout);\n      },\n    ]\n  );\n  let impressions = [];\n  let impressionsRaw = props?.payload;\n  if (impressionsRaw)\n    Object.keys(impressionsRaw).forEach((pane) => {\n      if (props?.activePanes?.includes(pane))\n        Object.keys(impressionsRaw[pane]).forEach((paneFragment) => {\n          Object.keys(impressionsRaw[pane][paneFragment]).forEach(\n            (impression, index) => {\n              let this_impression =\n                impressionsRaw[pane][paneFragment][impression];\n              let title;\n              if (typeof this_impression?.wordmark === \"string\")\n                title = wordmark(this_impression?.wordmark);\n              impressions.push(\n                <div\n                  className=\"keen-slider__slide a\"\n                  key={index}\n                  id={impression}\n                >\n                  {title}\n                  <span>\n                    {impressionsRaw[pane][paneFragment][impression]?.headline}\n                  </span>\n                </div>\n              );\n            }\n          );\n        });\n    });\n\n  let title = wordmark(\"tractstack\");\n  impressions.push(\n    <div className=\"keen-slider__slide b\" key=\"tractstack\">\n      <span className=\"title\">{title}</span>\n      <span className=\"headline\">\n        Learning science powered product-market-fit finder for start-ups, brand\n        evangelists and community builders.\n      </span>\n      <span className=\"more\">Read &gt;</span>\n    </div>\n  );\n\n  return (\n    <div\n      id=\"controller-carousel\"\n      className=\"controller__container--carousel keen-slider\"\n      ref={refCallback}\n    >\n      {impressions}\n    </div>\n  );\n};\n\nexport { ImpressionsCarousel, ImpressionsIcons };\n"],"mappings":"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"}