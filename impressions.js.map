{"version":3,"file":"impressions.js","names":["React","useKeenSlider","wordmark","ImpressionsCarousel","payload","visible","console","log","refCallback","slider","sliderNode","loop","mode","breakpoints","slides","perView","spacing","timeout","mouseOver","clearNextTimeout","clearTimeout","nextTimeout","setTimeout","next","on","container","addEventListener","impressions","impressionsRaw","Object","keys","forEach","pane","paneFragment","impression","index","this_impression","title","push","headline"],"sources":["src/impressions.js"],"sourcesContent":["import React from \"react\";\nimport \"keen-slider/keen-slider.min.css\";\nimport { useKeenSlider } from \"keen-slider/react\";\nimport { wordmark } from \"./shapes\";\n\nconst ImpressionsCarousel = (payload, visible) => {\n  console.log(4, payload, visible);\n\n  const [refCallback, slider, sliderNode] = useKeenSlider(\n    {\n      loop: true,\n      mode: \"free-snap\",\n\n      breakpoints: {\n        \"(min-width: 601px)\": {\n          slides: { perView: 3, spacing: 4 },\n        },\n        \"(min-width: 1367px)\": {\n          slides: { perView: 5, spacing: 6 },\n        },\n      },\n      slides: { perView: 2 },\n    },\n    [\n      (slider) => {\n        let timeout;\n        let mouseOver = false;\n        function clearNextTimeout() {\n          clearTimeout(timeout);\n        }\n        function nextTimeout() {\n          clearTimeout(timeout);\n          if (mouseOver) return;\n          timeout = setTimeout(() => {\n            slider.next();\n          }, 22000);\n        }\n        slider.on(\"created\", () => {\n          slider.container.addEventListener(\"mouseover\", () => {\n            mouseOver = true;\n            clearNextTimeout();\n          });\n          slider.container.addEventListener(\"mouseout\", () => {\n            mouseOver = false;\n            nextTimeout();\n          });\n          nextTimeout();\n        });\n        slider.on(\"dragStarted\", clearNextTimeout);\n        slider.on(\"animationEnded\", nextTimeout);\n        slider.on(\"updated\", nextTimeout);\n      },\n    ]\n  );\n\n  let impressions = [];\n  let impressionsRaw = payload?.payload;\n  Object.keys(impressionsRaw).forEach((pane) => {\n    Object.keys(impressionsRaw[pane]).forEach((paneFragment) => {\n      Object.keys(impressionsRaw[pane][paneFragment]).forEach(\n        (impression, index) => {\n          let this_impression = impressionsRaw[pane][paneFragment][impression];\n          let title;\n          if (typeof this_impression?.wordmark === \"string\")\n            title = wordmark(this_impression?.wordmark);\n          impressions.push(\n            <div className=\"keen-slider__slide a\" key={index} id={impression}>\n              {title}\n              <span>\n                {impressionsRaw[pane][paneFragment][impression]?.headline}\n              </span>\n            </div>\n          );\n        }\n      );\n    });\n  });\n\n  let title = wordmark(\"tractstack\");\n  impressions.push(\n    <div className=\"keen-slider__slide b\" key=\"tractstack\">\n      <span className=\"title\">{title}</span>\n      <span className=\"headline\">\n        Learning science powered product-market-fit finder for start-ups, brand\n        evangelists and community builders.\n      </span>\n      <span className=\"more\">Read &gt;</span>\n    </div>\n  );\n\n  return (\n    <div\n      id=\"controller-carousel\"\n      className=\"controller__container--carousel keen-slider\"\n      ref={refCallback}\n    >\n      {impressions}\n    </div>\n  );\n};\n\nexport { ImpressionsCarousel };\n"],"mappings":"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"}