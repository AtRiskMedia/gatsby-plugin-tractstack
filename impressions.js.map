{"version":3,"file":"impressions.js","names":["React","Component","Slider","wordmark","icon","lispLexer","lispCallback","ImpressionsIcons","props","iconsMode","icons","impressionsRaw","payload","Object","keys","forEach","pane","activePanes","includes","paneFragment","impression","index","this_impression","this_icon","injectPayload","payload_ast","actionsLisp","useHookEndPoint","push","length","Slide","this_id","title","headline","hook","ImpressionsCarousel","render","settings","dots","infinite","slidesToShow","slidesToScroll","autoplay","fade","arrows","autoplaySpeed","impressions","viewportKey"],"sources":["src/impressions.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport Slider from \"react-slick\";\nimport { wordmark, icon } from \"./shapes\";\nimport { lispLexer } from \"./lexer\";\nimport { lispCallback } from \"./helpers\";\n\nconst ImpressionsIcons = (props) => {\n  let iconsMode,\n    icons = [];\n  let impressionsRaw = props?.payload;\n  if (impressionsRaw)\n    Object.keys(impressionsRaw).forEach((pane) => {\n      if (props?.activePanes?.includes(pane))\n        Object.keys(impressionsRaw[pane]).forEach((paneFragment) => {\n          Object.keys(impressionsRaw[pane][paneFragment]).forEach(\n            (impression, index) => {\n              let this_impression =\n                impressionsRaw[pane][paneFragment][impression];\n              let this_icon = icon(this_impression?.icon);\n              function injectPayload() {\n                let payload_ast = lispLexer(this_impression?.actionsLisp);\n                lispCallback(payload_ast[0], \"\", props?.useHookEndPoint);\n              }\n              icons.push(\n                <li\n                  key={index}\n                  className=\"action visible\"\n                  onClick={() => injectPayload()}\n                >\n                  {this_icon}\n                </li>\n              );\n            }\n          );\n        });\n    });\n  if (icons.length <= 4) iconsMode = \"default\";\n  else iconsMode = \"full\";\n\n  return <ul className={iconsMode}>{icons}</ul>;\n};\n\nconst Slide = (props) => {\n  return (\n    <div key={props?.this_id}>\n      <div className=\"title\">{props?.title}</div>\n      <div className=\"headline\">\n        {props?.headline}{\" \"}\n        <a className=\"more\" onClick={() => props?.hook()}>\n          Read&nbsp;&gt;\n        </a>\n      </div>\n    </div>\n  );\n};\n\nexport default class ImpressionsCarousel extends Component {\n  render() {\n    let props = this?.props;\n    var settings = {\n      dots: false, //true,\n      infinite: true,\n      slidesToShow: 1,\n      slidesToScroll: 1,\n      autoplay: true,\n      fade: true,\n      arrows: false,\n      autoplaySpeed: 22000,\n    };\n    let impressions = [];\n    let impressionsRaw = props?.payload;\n    if (impressionsRaw)\n      Object.keys(impressionsRaw).forEach((pane) => {\n        if (props?.activePanes?.includes(pane))\n          Object.keys(impressionsRaw[pane]).forEach((paneFragment) => {\n            Object.keys(impressionsRaw[pane][paneFragment]).forEach(\n              (impression, index) => {\n                function injectPayload() {\n                  let payload_ast = lispLexer(this_impression?.actionsLisp);\n                  lispCallback(payload_ast[0], \"\", props?.useHookEndPoint);\n                }\n                let this_impression =\n                  impressionsRaw[pane][paneFragment][impression];\n                let title;\n                if (typeof this_impression?.wordmark === \"string\")\n                  title = wordmark(this_impression?.wordmark);\n                else title = this_impression?.title;\n                impressions.push(\n                  Slide({\n                    this_id: this_impression?.icon,\n                    title: title,\n                    headline: this_impression?.headline,\n                    hook: injectPayload,\n                  })\n                );\n              }\n            );\n          });\n      });\n    let title = wordmark(\"tractstack\");\n    impressions.push(\n      <div key=\"powered-by-tractstack\">\n        <div className=\"title\">{title}</div>\n        <div className=\"headline\">\n          Learning science powered product-market-fit finder for start-ups,\n          brand evangelists and community builders.\n        </div>\n      </div>\n    );\n    /*\n    // add fillers\n    let emptySlots = 0;\n    if (impressions.length <= slots[props?.viewportKey])\n      emptySlots = slots[props?.viewportKey] - impressions.length + 1;\n    while (emptySlots) {\n      impressions.push(\n        <div key={`blank-${emptySlots}-${props?.viewportKey}`}>\n          <div className=\"blank\">**{emptySlots}</div>\n        </div>\n      );\n      emptySlots = emptySlots - 1;\n    }\n*/\n    return (\n      <div\n        id={`controller-carousel-${props?.viewportKey}`}\n        className={`controller-carousel controller-carousel-${props?.viewportKey} controller__container--carousel`}\n      >\n        <Slider {...settings}>{impressions}</Slider>\n      </div>\n    );\n  }\n}\n\nexport { ImpressionsCarousel, ImpressionsIcons };\n"],"mappings":"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"}