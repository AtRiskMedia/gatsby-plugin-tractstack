{"version":3,"file":"compose-panes.js","names":["React","useRef","renderToStaticMarkup","IsVisible","InjectPaneFragment","InjectSvgModal","StyledWrapperDiv","InjectCssAnimation","HasImageMask","HasPaneFragmentType","thisViewportValue","SvgModals","SvgShape","ComposedPane","Component","render","pane","props","data","state","hooks","pane_css","effects","background_colour","relationships","field_pane_fragments","filter","e","internal","type","this_selector","shape","pane_height_ratio","viewport","key","mobile","field_height_ratio_mobile","tablet","field_height_ratio_tablet","desktop","field_height_ratio_desktop","pane_height","pane_height_css","height_offset","field_height_offset_mobile","field_height_offset_tablet","field_height_offset_desktop","length","field_background_colour","composedPaneFragments","field_hidden_viewports","replace","split","indexOf","sort","a","b","field_zindex","map","pane_fragment","index","react_fragment","tractStackFragment","payload","tempValue","imageData","field_image_mask_shape_mobile","field_image_mask_shape_tablet","field_image_mask_shape_desktop","this_options","imageMaskShapeSelector","svgString","b64","window","btoa","dataUri","childPaneFragment","childMarkdownRemark","htmlAst","children","value","field_text_shape_outside_mobile","field_text_shape_outside_tablet","field_text_shape_outside_desktop","field_modal","textShapeOutside","maskData","id","left_mask","right_mask","field_options","options","this_payload","this_fragment","this_shape","this_css","this_viewport","JSON","parse","SyntaxError","console","log","mode","cut","width","height","z_index","field_css_styles_parent_mobile","field_css_styles_parent_tablet","field_css_styles_parent_desktop","padding_left","padding_top","push","field_shape_mobile","field_shape_tablet","field_shape_desktop","shapeData","videoData","url","field_cdn_url","alt_text","field_alt_text","field_svg_file","localFile","publicURL","description","buttons","buttonData","structuredClone","field_image","this_image","this_imageData","filename","backgroundPosition","field_background_position","css_child","field_css_styles_mobile","field_css_styles_tablet","field_css_styles_desktop","css_parent","device","css","parent","child","hooksData","modalData","this_pane_fragment_type","thisClass","renderedPaneFragment","prefersReducedMotion","this_effects_payload","in","function","speed","delay","this_effects_css","paneFragment","ComposePanes","composedPanes","fragments","field_panes","i"],"sources":["src/compose-panes.js"],"sourcesContent":["import React, { useRef } from \"react\";\nimport { renderToStaticMarkup } from \"react-dom/server\";\nimport { IsVisible } from \"./is-visible.js\";\nimport {\n  InjectPaneFragment,\n  InjectSvgModal,\n  StyledWrapperDiv,\n  InjectCssAnimation,\n  HasImageMask,\n  HasPaneFragmentType,\n  thisViewportValue,\n} from \"./helpers\";\nimport { SvgModals, SvgShape } from \"./shapes\";\n\nclass ComposedPane extends React.Component {\n  render() {\n    const pane = this?.props?.data?.pane;\n    const state = this?.props?.data?.state;\n    const hooks = this?.props?.data?.hooks;\n    let pane_css = \"\",\n      effects = [];\n\n    // set key variables\n    let background_colour = pane?.relationships?.field_pane_fragments.filter(\n      (e) => e?.internal?.type === \"paragraph__background_colour\"\n    );\n    let this_selector, shape;\n    let pane_height_ratio = thisViewportValue(state?.viewport?.viewport?.key, {\n      mobile: pane?.field_height_ratio_mobile,\n      tablet: pane?.field_height_ratio_tablet,\n      desktop: pane?.field_height_ratio_desktop,\n    });\n    let pane_height = thisViewportValue(state?.viewport?.viewport?.key, {\n      mobile: (600 * pane_height_ratio) / 100,\n      tablet: (1080 * pane_height_ratio) / 100,\n      desktop: (1920 * pane_height_ratio) / 100,\n    });\n    let pane_height_css = `calc((100vw - (var(--offset) * 1px)) * ${pane_height_ratio} / 100)`;\n    let height_offset = thisViewportValue(state?.viewport?.viewport?.key, {\n      mobile: `calc((100vw - (var(--offset) * 1px)) / 600 * ${pane?.field_height_offset_mobile})`,\n      tablet: `calc((100vw - (var(--offset) * 1px)) / 1080 * ${pane?.field_height_offset_tablet})`,\n      desktop: `calc((100vw - (var(--offset) * 1px)) / 1920 * ${pane?.field_height_offset_desktop})`,\n    });\n\n    // prepare css for pane\n    pane_css = `${pane_css} height: ${pane_height_css}; margin-bottom: ${height_offset};`;\n    if (background_colour.length)\n      pane_css = `${pane_css} background-color: ${background_colour[0].field_background_colour};`;\n\n    // now compose the paneFragments for this pane\n    let composedPaneFragments = [];\n    pane?.relationships?.field_pane_fragments\n      // skip if current viewport is listed in field_hidden_viewports\n      .filter(\n        (e) =>\n          typeof e?.field_hidden_viewports === \"string\" &&\n          e?.field_hidden_viewports\n            .replace(/\\s+/g, \"\")\n            .split(\",\")\n            .indexOf(state?.viewport?.viewport?.key) == -1\n      )\n      // already processed background_colour\n      .filter((e) => e?.internal?.type !== \"paragraph__background_colour\")\n      // sort by zIndex ***important\n      .sort((a, b) => (a?.field_zindex > b?.field_zindex ? 1 : -1))\n      .map((pane_fragment, index) => {\n        let react_fragment,\n          tractStackFragment,\n          payload = {},\n          tempValue,\n          shape;\n        payload.imageData = [];\n\n        // check for imageMasks\n        shape = thisViewportValue(state?.viewport?.viewport?.key, {\n          mobile: pane_fragment?.field_image_mask_shape_mobile,\n          tablet: pane_fragment?.field_image_mask_shape_tablet,\n          desktop: pane_fragment?.field_image_mask_shape_desktop,\n        });\n        if (typeof shape === \"string\" && shape !== \"none\") {\n          let this_options = {\n            viewport: state?.viewport?.viewport,\n            pane_height: pane_height,\n          };\n          let tempValue = SvgShape(shape, this_options);\n          if (tempValue) shape = tempValue.shape;\n          let imageMaskShapeSelector =\n            HasImageMask[pane_fragment?.internal?.type];\n          if (imageMaskShapeSelector) {\n            let svgString = renderToStaticMarkup(shape);\n            let b64 = window.btoa(svgString);\n            let dataUri = `data:image/svg+xml;base64,${b64}`;\n            pane_css =\n              `${pane_css} ${imageMaskShapeSelector} {-webkit-mask-image: url(\"${dataUri}\"); mask-image: url(\"${dataUri}\");` +\n              ` mask-repeat: no-repeat; -webkit-mask-size: 100% AUTO; mask-size: 100% AUTO; }`;\n          }\n        }\n\n        // pre-pass paneFragment based on type\n        switch (pane_fragment?.internal?.type) {\n          case \"paragraph__markdown\":\n            // prepare any markdown for this paneFragment\n            if (\n              pane_fragment?.childPaneFragment?.childMarkdownRemark?.htmlAst\n            ) {\n              payload.children =\n                pane_fragment?.childPaneFragment?.childMarkdownRemark?.htmlAst;\n              payload.children.children =\n                pane_fragment?.childPaneFragment?.childMarkdownRemark?.htmlAst?.children?.filter(\n                  (e) => !(e.type === \"text\" && e.value === \"\\n\")\n                );\n            }\n            shape = thisViewportValue(state?.viewport?.viewport?.key, {\n              mobile: pane_fragment?.field_text_shape_outside_mobile,\n              tablet: pane_fragment?.field_text_shape_outside_tablet,\n              desktop: pane_fragment?.field_text_shape_outside_desktop,\n            });\n            if (shape && !pane_fragment?.field_modal) {\n              // regular markdown paragraph; add shape outside if any\n              if (shape && shape !== \"none\") {\n                let this_options = {\n                  textShapeOutside: true,\n                  viewport: state?.viewport?.viewport,\n                  pane_height: pane_height,\n                };\n                tempValue = SvgShape(shape, this_options);\n                if (tempValue)\n                  payload.maskData = {\n                    textShapeOutside: tempValue,\n                  };\n                pane_css =\n                  `${pane_css} #svg__${tempValue?.id}--shape-outside-left {float:left;shape-outside:url(${tempValue?.left_mask})} ` +\n                  `#svg__${tempValue?.id}--shape-outside-right {float:right;shape-outside:url(${tempValue?.right_mask})}`;\n              }\n            } else if (shape && pane_fragment?.field_modal) {\n              // this is a modal\n              if (typeof pane_fragment?.field_options === \"string\") {\n                let options = {},\n                  this_payload = {},\n                  this_fragment,\n                  this_shape,\n                  this_css,\n                  this_viewport;\n                try {\n                  options = JSON.parse(pane_fragment?.field_options);\n                } catch (e) {\n                  if (e instanceof SyntaxError) {\n                    console.log(\"ERROR parsing json in {}: \", e);\n                  }\n                }\n                if (typeof options?.render === \"object\") {\n                  this_payload = {\n                    id: pane_fragment?.id,\n                    mode: \"modal\",\n                    textShapeOutside: true,\n                    viewport: state?.viewport?.viewport,\n                    cut: SvgModals[shape][\"cut\"],\n                    width: SvgModals[shape][\"viewBox\"][0],\n                    height: SvgModals[shape][\"viewBox\"][1],\n                    pane_height: pane_height,\n                    z_index: pane_fragment?.field_zindex,\n                    ...options?.render[state?.viewport?.viewport?.key],\n                  };\n                  this_shape = SvgShape(shape, this_payload);\n                  // generate react fragment\n                  this_fragment = InjectSvgModal(\n                    this_shape?.shape,\n                    this_payload\n                  );\n                  this_payload.shape = this_shape;\n                  this_css = thisViewportValue(state?.viewport?.viewport?.key, {\n                    mobile: pane_fragment?.field_css_styles_parent_mobile,\n                    tablet: pane_fragment?.field_css_styles_parent_tablet,\n                    desktop: pane_fragment?.field_css_styles_parent_desktop,\n                  });\n                  pane_css =\n                    `${pane_css} ${this_css} ` +\n                    `#fragment-${pane_fragment?.id} svg.svg-shape-outside-left { ` +\n                    `z-index: ${pane_fragment?.z_index - 1};` +\n                    `width: calc((100vw - (var(--offset) * 1px)) / ${\n                      this_payload?.viewport?.width\n                    } * ${this_payload?.padding_left + this_payload?.cut}); ` +\n                    `} ` +\n                    `#fragment-${pane_fragment?.id} svg.svg-shape-outside-right { ` +\n                    `z-index: ${pane_fragment?.z_index - 1};` +\n                    `width: calc((100vw - (var(--offset) * 1px)) / ${\n                      this_payload?.viewport?.width\n                    } * ${\n                      this_payload?.viewport?.width -\n                      this_payload?.width +\n                      this_payload?.cut -\n                      this_payload?.padding_left\n                    }); ` +\n                    `} ` +\n                    `#${pane_fragment?.id}-svg-modal svg { ` +\n                    `z-index: ${pane_fragment?.z_index - 1}; ` +\n                    `width: calc((100vw - (var(--offset) * 1px)) / ${this_payload?.viewport?.width} * ${this_payload?.width}); ` +\n                    `margin-left: calc((100vw - (var(--offset) * 1px)) / ${this_payload?.viewport?.width} * ${this_payload?.padding_left}); ` +\n                    `margin-top: calc((100vw - (var(--offset) * 1px)) / ${this_payload?.viewport?.width} * ${this_payload?.padding_top}); ` +\n                    `}`;\n                }\n                payload.maskData = { textShapeOutside: this_shape };\n                pane_css =\n                  `${pane_css} #svg__${this_shape?.id}--shape-outside-left {float:left;shape-outside:url(${this_shape?.left_mask})} ` +\n                  `#svg__${this_shape?.id}--shape-outside-right {float:right;shape-outside:url(${this_shape?.right_mask})}`;\n                // add modal shape to stack\n                composedPaneFragments.push(\n                  <div\n                    className={`paneFragment paneFragment__view paneFragment__view--${state?.viewport?.viewport?.key}`}\n                    key={`modal-${this_shape?.id}`}\n                  >\n                    <IsVisible\n                      once\n                      id={`modal-${this_shape?.id}`}\n                      className=\"paneFragment\"\n                      key={`${this_shape?.id}-visible`}\n                      hooks={hooks}\n                    >\n                      {this_fragment}\n                    </IsVisible>\n                  </div>\n                );\n              }\n            }\n            break;\n\n          case \"paragraph__background_pane\":\n            shape = thisViewportValue(state?.viewport?.viewport?.key, {\n              mobile: pane_fragment?.field_shape_mobile,\n              tablet: pane_fragment?.field_shape_tablet,\n              desktop: pane_fragment?.field_shape_desktop,\n            });\n            let this_options = {\n              viewport: state?.viewport?.viewport,\n              pane_height: pane_height,\n            };\n            tempValue = SvgShape(shape, this_options);\n            if (tempValue) payload.shapeData = tempValue.shape;\n            break;\n\n          case \"paragraph__background_video\":\n            payload.videoData = {\n              url: pane_fragment?.field_cdn_url,\n              alt_text: pane_fragment?.field_alt_text,\n            };\n            break;\n\n          case \"paragraph__svg\":\n            payload.imageData = [\n              {\n                url: pane_fragment?.relationships?.field_svg_file?.localFile\n                  ?.publicURL,\n                alt_text: pane_fragment?.field_svg_file?.description,\n              },\n            ];\n            break;\n        }\n\n        // extract animation effects and buttonData (if any)\n        if (typeof pane_fragment?.field_options === \"string\") {\n          try {\n            tempValue = JSON.parse(pane_fragment?.field_options);\n          } catch (e) {\n            if (e instanceof SyntaxError) {\n              console.log(\"ERROR parsing json in compose-panes.js: \", e);\n            }\n          }\n          if (typeof tempValue?.buttons === \"object\")\n            payload.buttonData = tempValue?.buttons;\n          // effects are directly injected into each pane below\n          if (typeof tempValue?.effects === \"object\") {\n            for (const key in tempValue?.effects) {\n              // store animation\n              effects[`fragment-${pane_fragment?.id}`] =\n                tempValue?.effects[key];\n              effects[`fragment-${pane_fragment?.id}`][\n                \"paneFragment\"\n              ] = `fragment-${pane_fragment?.id}`;\n              effects[`fragment-${pane_fragment?.id}`][\"pane\"] = pane?.id;\n              // clone and store animation for modal (if any)\n              if (\n                pane_fragment?.internal?.type === \"paragraph__modal\" ||\n                pane_fragment?.field_modal\n              ) {\n                effects[`modal-${pane_fragment?.id}`] = structuredClone(\n                  tempValue?.effects[key]\n                );\n                effects[`modal-${pane_fragment?.id}`][\n                  \"paneFragment\"\n                ] = `modal-${pane_fragment?.id}`;\n              }\n            }\n          }\n        }\n        // prepare any images from this paneFragment\n        pane_fragment?.relationships?.field_image?.map((e) => {\n          let this_image = thisViewportValue(state?.viewport?.viewport?.key, {\n            mobile: e?.mobile,\n            tablet: e?.tablet,\n            desktop: e?.desktop,\n          });\n          if (this_image) {\n            let this_imageData = {\n              id: e?.id,\n              filename: e?.filename,\n              data: this_image,\n              backgroundPosition:\n                pane_fragment?.field_background_position || null,\n            };\n            if (typeof pane_fragment?.field_alt_text === \"string\")\n              this_imageData.alt_text = pane_fragment?.field_alt_text;\n            payload.imageData.push(this_imageData);\n          }\n        });\n        // select css for viewport\n        payload.css_child = thisViewportValue(state?.viewport?.viewport?.key, {\n          mobile: pane_fragment?.field_css_styles_mobile || \"\",\n          tablet: pane_fragment?.field_css_styles_tablet || \"\",\n          desktop: pane_fragment?.field_css_styles_desktop || \"\",\n        });\n        payload.css_parent = thisViewportValue(state?.viewport?.viewport?.key, {\n          mobile: pane_fragment?.field_css_styles_parent_mobile || \"\",\n          tablet: pane_fragment?.field_css_styles_parent_tablet || \"\",\n          desktop: pane_fragment?.field_css_styles_parent_desktop || \"\",\n        });\n\n        // prepare structured data for this paneFragment\n        tractStackFragment = {\n          id: pane_fragment?.id,\n          mode: pane_fragment?.internal?.type,\n          pane_height_css: pane_height_css,\n          viewport: {\n            device: state?.viewport?.viewport?.key,\n            width: state?.viewport?.viewport?.width,\n          },\n          z_index: pane_fragment?.field_zindex,\n          children: payload?.children || {},\n          css: {\n            parent: payload?.css_parent || \"\",\n            child: payload?.css_child || \"\",\n          },\n          payload: {\n            imageData: payload?.imageData || [],\n            maskData: payload?.maskData || {},\n            hooksData: hooks || {},\n            videoData: payload?.videoData || {},\n            shapeData: payload?.shapeData || {},\n            modalData: payload?.modalData || {},\n            buttonData: payload?.buttonData || {},\n          },\n        };\n\n        let this_pane_fragment_type =\n          HasPaneFragmentType[tractStackFragment?.mode];\n        if (this_pane_fragment_type)\n          react_fragment = InjectPaneFragment(\n            tractStackFragment,\n            this_pane_fragment_type\n          );\n        else\n          console.log(\n            \"ERROR in compose-panes.js: pane fragment type not found.\"\n          );\n\n        let thisClass = `paneFragment paneFragment__view paneFragment__view--${state?.viewport?.viewport?.key}`;\n        let renderedPaneFragment;\n\n        // are there effects?\n        if (typeof effects[`fragment-${pane_fragment?.id}`] === \"object\") {\n          renderedPaneFragment = (\n            <IsVisible\n              once\n              id={`fragment-${pane_fragment?.id}`}\n              className=\"paneFragment\"\n              key={`fragment-${pane_fragment?.id}`}\n              hooks={hooks}\n            >\n              {react_fragment}\n            </IsVisible>\n          );\n        } else\n          renderedPaneFragment = (\n            <div\n              id={`fragment-${pane_fragment?.id}`}\n              className=\"paneFragment\"\n              key={`fragment-${pane_fragment?.id}`}\n            >\n              {react_fragment}\n            </div>\n          );\n\n        // add the composed pane fragment\n        composedPaneFragments.push(\n          <div className={thisClass} key={pane_fragment?.id}>\n            {renderedPaneFragment}\n          </div>\n        );\n      });\n    // skip if empty pane\n    if (composedPaneFragments.length === 0) return;\n\n    // now render the pane\n\n    // may we wrap this in animation?\n    if (state?.prefersReducedMotion?.prefersReducedMotion === false) {\n      for (const key in effects) {\n        let this_effects_payload = {\n          in: [\n            effects[key]?.function,\n            effects[key]?.speed,\n            effects[key]?.delay,\n          ],\n        };\n        let this_effects_css = InjectCssAnimation(\n          this_effects_payload,\n          effects[key]?.paneFragment\n        );\n        pane_css = `${pane_css} ${this_effects_css} `;\n      }\n    }\n    return (\n      <section key={pane?.id}>\n        <StyledWrapperDiv\n          className={`pane pane__view pane__view--${state?.viewport?.viewport?.key}`}\n          css={pane_css}\n          id={pane?.id}\n        >\n          {composedPaneFragments}\n        </StyledWrapperDiv>\n      </section>\n    );\n  }\n}\n\nconst ComposePanes = (data) => {\n  // if viewport is not yet defined, return empty fragment\n  if (typeof data?.state?.viewport?.viewport?.key === \"undefined\") return <></>;\n\n  // loop through the panes in view and render each pane fragment\n  const composedPanes = data?.fragments?.relationships?.field_panes.map(\n    (pane, i) => {\n      return (\n        <ComposedPane\n          key={i}\n          data={{ pane: pane, state: data?.state, hooks: data?.hooks }}\n        />\n      );\n    }\n  );\n  // this is the storyFragment\n  if (typeof composedPanes === \"undefined\") return <></>;\n  return composedPanes;\n};\n\nexport { ComposePanes };\n"],"mappings":"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"}